(self["webpackChunkbotfree"]=self["webpackChunkbotfree"]||[]).push([[299],{6906:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>k});var n=a(9835),i=a(6970);const s={class:"column flex-center"},o=(0,n._)("div",{class:""},"Пожалуйста, подождите...",-1),c={class:""},l={class:"q-pa-md"},r=(0,n._)("div",{class:"text-h4 text-center"},"Авторизация",-1),d=(0,n._)("div",{class:"q-pb-sm"},"Ваш код",-1),u={class:""};function h(e,t,a,h,p,m){const g=(0,n.up)("q-spinner"),w=(0,n.up)("q-card"),f=(0,n.up)("q-dialog"),v=(0,n.up)("q-input"),I=(0,n.up)("q-card-section"),x=(0,n.up)("q-btn"),_=(0,n.up)("q-card-actions"),q=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(q,{class:"flex justify-center items-start bg-white"},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{modelValue:e.viewInitLoading,"onUpdate:modelValue":t[0]||(t[0]=t=>e.viewInitLoading=t),persistent:"",maximized:"","transition-show":"none","transition-hide":"none"},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{class:"flex flex-center"},{default:(0,n.w5)((()=>[(0,n._)("div",s,[(0,n.Wm)(g,{color:"primary",size:"3em",thickness:10}),o,(0,n._)("div",c,(0,i.zw)(e.getInitData),1)])])),_:1})])),_:1},8,["modelValue"]),(0,n._)("div",l,[r,(0,n.Wm)(w,{class:"q-ma-md q-pa-sm card-auth"},{default:(0,n.w5)((()=>[(0,n.Wm)(I,null,{default:(0,n.w5)((()=>[d,(0,n.Wm)(v,{style:{width:"300px"},modelValue:e.code,"onUpdate:modelValue":t[1]||(t[1]=t=>e.code=t),color:"teal",type:"text",outlined:"",dense:"",hint:"Для авторизации введите код полученный в телеграмме",rules:[e=>e.length<=3||"Можно ввести не более 3 символов",e=>e.length>=1||"Можно ввести не менее 1 символа"]},null,8,["modelValue","rules"])])),_:1}),(0,n.Wm)(_,{align:"center"},{default:(0,n.w5)((()=>[(0,n.Wm)(x,{class:"full-width",color:"teal",padding:"8px 0px",label:"Войти",to:"/auth"})])),_:1})])),_:1}),(0,n._)("div",u,(0,i.zw)(e.getInitData),1)])])),_:1})}a(702),a(3269);var p=a(499),m=a(3100),g=a(425),w=a.n(g),f=a(7779);function v(e,t){if(0==e||0==t.secretKey)return!1;{let a=e,n=a.hash;const i=Object.keys(a).filter((e=>"hash"!==e)).map((e=>`${e}=${a[e]}`)).sort().join("\n");f.log();const s=w().HmacSHA256(i,w().enc.Hex.parse(t.secretKey)).toString(w().enc.Hex);return s==n}}a(1902);const I=(0,n.aZ)({name:"IndexPage",setup(){return{dialCode:(0,p.iH)(!1),code:(0,p.iH)("")}},computed:{...(0,m.Se)(["userValid","getInitData","viewInitLoading"])},methods:{...(0,m.nv)(["getUserData"]),...(0,m.OI)(["changeValidator","changeInitData","changeInitLoading"]),convertURL(e){if(""==e)return!1;{let t={};for(const[a,n]of new URLSearchParams(e))t[a]=n;return t}}},mounted(){this.changeValidator(v(this.convertURL(window.Telegram.WebApp.initData),this.convertURL(window.location.search))),this.changeInitData({data:this.convertURL(window.Telegram.WebApp.initData),search:this.convertURL(window.location.search)})},watch:{getInitData(){this.userValid&&""!=this.getInitData.data&&""!=this.getInitData.search?this.changeInitLoading(!1):setTimeout((()=>this.changeInitLoading(!1)),500)}}});var x=a(1639),_=a(9885),q=a(2074),D=a(4458),L=a(3940),b=a(3190),V=a(3494),W=a(1821),Z=a(4455),U=a(9984),Q=a.n(U);const y=(0,x.Z)(I,[["render",h]]),k=y;Q()(I,"components",{QPage:_.Z,QDialog:q.Z,QCard:D.Z,QSpinner:L.Z,QCardSection:b.Z,QInput:V.Z,QCardActions:W.Z,QBtn:Z.Z})},2480:()=>{}}]);