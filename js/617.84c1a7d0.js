"use strict";(self["webpackChunkbotfree"]=self["webpackChunkbotfree"]||[]).push([[617],{1617:(e,t,l)=>{l.r(t),l.d(t,{default:()=>Be});var s=l(9835),o=l(1957);const a=e=>((0,s.dD)("data-v-0e6a65cc"),e=e(),(0,s.Cn)(),e),c=a((()=>(0,s._)("div",{class:"q-pa-lg flex center max-xxl text-h4"},"Каталог товаров бота",-1))),i=a((()=>(0,s._)("div",{class:"max-xs center"},null,-1))),n={class:"flex center max-xxl q-gutter-md"},r={class:"flex center max-xxl"},d={class:"center max-xxl min-size-xl"},u={class:"flex wrap"},p={key:0,class:"full-width text-h4 rounded-borders text-grey flex flex-center column"},m=(0,s.Uk)(" Товаров нет "),w={key:1,class:"text-h4 rounded-borders text-grey flex flex-center full-width column"},h=(0,s.Uk)(" Категорий нет "),v={class:"footer q-pa-lg row justify-between items-center"},x={class:"social q-gutter-md"};function g(e,t,l,a,g,k){const f=(0,s.up)("q-btn"),y=(0,s.up)("q-input"),b=(0,s.up)("product-item"),_=(0,s.up)("q-skeleton"),q=(0,s.up)("q-card"),C=(0,s.up)("q-separator"),B=(0,s.up)("q-avatar"),W=(0,s.up)("productBasket"),D=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(D,{class:"bg-white"},{default:(0,s.w5)((()=>[c,i,(0,s._)("div",n,[(0,s.Wm)(f,{rounded:"",outline:"",color:"teal",icon:"chevron_left",title:"Обратно",onClick:t[0]||(t[0]=t=>e.viewAllProducts())}),(0,s.Wm)(f,{rounded:"",outline:7==e.selectView,color:"teal",label:"категории",onClick:t[1]||(t[1]=t=>e.selectView=0)},null,8,["outline"]),(0,s.Wm)(f,{rounded:"",outline:0==e.selectView,color:"teal",label:"товары",onClick:t[2]||(t[2]=t=>e.selectView=7)},null,8,["outline"])]),(0,s._)("div",r,[(0,s.Wm)(y,{class:"q-ma-lg max-lg",style:{width:"100%"},rounded:"",outlined:"",dense:"",label:e.changeLabel(),color:"teal",modelValue:e.search,"onUpdate:modelValue":t[3]||(t[3]=t=>e.search=t),type:"text"},null,8,["label","modelValue"])]),(0,s._)("div",d,[(0,s._)("div",u,[0==e.viewItems().length&&7==e.selectView&&0!=e.allProducts.length?((0,s.wg)(),(0,s.iD)("div",p,[m,(0,s.Wm)(f,{class:"q-ma-md",padding:"4px 16px",rounded:"",dense:"",outline:"",color:"teal",label:"Посмотреть Категории",onClick:t[4]||(t[4]=t=>e.selectView=0)})])):(0,s.kq)("",!0),0==e.viewItems().length&&0==e.selectView&&0!=e.allProducts.length?((0,s.wg)(),(0,s.iD)("div",w,[h,(0,s.Wm)(f,{class:"q-ma-md",padding:"4px 16px",rounded:"",dense:"",outline:"",color:"teal",label:"Посмотреть товары",onClick:t[5]||(t[5]=t=>e.selectView=7)})])):(0,s.kq)("",!0),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.viewItems(),((e,t)=>((0,s.wg)(),(0,s.j4)(b,{class:"",key:t,product:e},null,8,["product"])))),128)),((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(8,((t,l)=>(0,s.wy)((0,s.Wm)(q,{class:"my-card q-ma-sm",key:l},{default:(0,s.w5)((()=>[(0,s.Wm)(_,{height:"160px",square:""})])),_:2},1024),[[o.F8,0==e.allProducts.length]]))),64))])]),(0,s.Wm)(C),(0,s._)("div",v,[(0,s.Wm)(f,{flat:"",dense:"",color:"teal",padding:"4px 8px",label:"Другая информация"}),(0,s._)("div",x,[(0,s.Wm)(B,{size:"30px",color:"teal","text-color":"white"}),(0,s.Wm)(B,{size:"30px",color:"blue-4","text-color":"white"}),(0,s.Wm)(B,{size:"30px",color:"purple-4","text-color":"white"})])]),(0,s.Wm)(W)])),_:1})}l(702),l(3269),l(6727);var k=l(499),f=l(3100),y=l(6970);const b=e=>((0,s.dD)("data-v-44e2ac16"),e=e(),(0,s.Cn)(),e),_=["title"],q={key:1,class:"column flex-center"},C=b((()=>(0,s._)("div",{class:"text-caption"},"Категория",-1))),B={class:"text-h6 end-dots"},W={key:0,class:"flex no-wrap justify-between"},D={class:"my-card-info"},Z={class:"end-dots title"},V={class:"text-caption text-weight-bold text-grey-7 end-dots caption"},j={key:0,class:"column q-pa-sm"};function I(e,t,l,o,a,c){const i=(0,s.up)("q-avatar"),n=(0,s.up)("q-btn"),r=(0,s.up)("q-card-section"),d=(0,s.up)("block-product-button"),u=(0,s.up)("q-card-actions"),p=(0,s.up)("q-card");return(0,s.wg)(),(0,s.j4)(p,{class:"my-card no-wrap q-ma-sm justify-between",style:(0,y.j5)({minWidth:l.basket?"98% ":"",minHeight:0!=l.product.type?"335px":"160px",maxHeight:0!=l.product.type?"335px":"160px"})},{default:(0,s.w5)((()=>[(0,s._)("div",{title:0==l.product.type?"Смотреть категорию":"",style:(0,y.j5)({height:0!=l.product.type?"160px":"",transition:0==l.product.type?"0.2s":""}),class:(0,y.C_)(["bg-teal rounded-borders flex flex-center text-white",{fit:0==l.product.type,"cursor-pointer":0==l.product.type,category:0==l.product.type}]),onClick:t[0]||(t[0]=(...e)=>c.openCategory&&c.openCategory(...e))},[0!=l.product.type?((0,s.wg)(),(0,s.j4)(i,{key:0,size:"100px","font-size":"52px",color:"transparent","text-color":"white",icon:"image_not_supported"})):(0,s.kq)("",!0),0==l.product.type?((0,s.wg)(),(0,s.iD)("div",q,[(0,s.Wm)(i,{size:"70px","font-size":"52px",color:"transparent","text-color":"white",icon:"image"}),C,(0,s._)("div",B,(0,y.zw)(l.product.design.title),1)])):(0,s.kq)("",!0)],14,_),0!=l.product.type?((0,s.wg)(),(0,s.iD)("div",W,[(0,s._)("div",D,[(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[(0,s._)("div",Z,(0,y.zw)(l.product.design.title),1),(0,s._)("div",V,(0,y.zw)(l.product.design.rules),1),7==l.product.type?((0,s.wg)(),(0,s.j4)(n,{key:0,color:"teal-9",dense:"",flat:"",class:"text-h6 text-weight-bold",padding:"0px 4px",label:l.product.price.amount+" "+c.convertСurrency},null,8,["label"])):(0,s.kq)("",!0)])),_:1})]),l.basket?((0,s.wg)(),(0,s.iD)("div",j,[(0,s.Wm)(n,{dense:"",flat:"",color:"teal",icon:"delete","no-caps":"",label:"Удалить",onClick:t[1]||(t[1]=t=>e.actionsWithBasket({action:"remove",category_id:l.product.id}))})])):(0,s.kq)("",!0)])):(0,s.kq)("",!0),7==l.product.type?((0,s.wg)(),(0,s.j4)(u,{key:1,align:"center",class:"flex absolute-bottom"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{prod:l.product},null,8,["prod"])])),_:1})):(0,s.kq)("",!0)])),_:1},8,["style"])}const P={class:"button-add fit"},U={key:1,class:"flex no-wrap flex-center rounded-borders justify-between count text-h6 fit"},Q={class:"q-px-xs absolute-center"};function z(e,t,l,a,c,i){const n=(0,s.up)("q-btn"),r=(0,s.up)("q-input"),d=(0,s.up)("q-popup-edit");return(0,s.wg)(),(0,s.iD)("div",P,[i.hasBasketItem()?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(n,{key:0,label:"В корзину",color:"teal",class:"fit",padding:"5px 32px",onClick:t[0]||(t[0]=t=>e.actionsWithBasket({action:"add",category_id:l.prod.id}))})),i.hasBasketItem()?((0,s.wg)(),(0,s.iD)("div",U,[(0,s.Wm)(n,{padding:"4px",flat:"",color:"grey-9",icon:"remove",onClick:t[1]||(t[1]=t=>e.actionsWithBasket({action:"subtract",category_id:l.prod.id}))}),(0,s._)("div",Q,[(0,s.Uk)((0,y.zw)(i.countInBasket)+" ",1),(0,s.Wm)(d,{modelValue:i.countInBasket,"onUpdate:modelValue":t[2]||(t[2]=e=>i.countInBasket=e),modelModifiers:{number:!0},buttons:"","label-set":"Изменить","label-cancel":"Отмена"},{default:(0,s.w5)((e=>[(0,s.Wm)(r,{type:"number",modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,dense:"",autofocus:"",counter:""},null,8,["modelValue","onUpdate:modelValue"])])),_:1},8,["modelValue"])]),(0,s.wy)((0,s.Wm)(n,{padding:"4px",flat:"",color:"grey-9",icon:"add",onClick:t[3]||(t[3]=t=>e.actionsWithBasket({action:"add",category_id:l.prod.id}))},null,512),[[o.F8,i.countInBasket<l.prod.setting.max_count]])])):(0,s.kq)("",!0)])}const H={props:["prod"],setup(){return{count:(0,k.iH)(0)}},computed:{...(0,f.Se)(["viewBasket"]),countInBasket(){return this.viewBasket.find((e=>e.product.id==this.prod.id)).count}},methods:{...(0,f.nv)(["actionsWithBasket"]),hasBasketItem(){return!!this.viewBasket.find((e=>e.product.id==this.prod.id))}}};var L=l(1639),S=l(4455),A=l(4496),K=l(3494),E=l(9984),R=l.n(E);const Y=(0,L.Z)(H,[["render",z],["__scopeId","data-v-76ebcb0c"]]),O=Y;R()(H,"components",{QBtn:S.Z,QPopupEdit:A.Z,QInput:K.Z});const F={components:{BlockProductButton:O},props:{product:{type:Object,required:!1},basket:{type:Boolean,required:!1}},computed:{convertСurrency(){switch(this.product.price.currency){case"RUB":return"₽";case"USD":return"$";case"EUR":return"€";case"UAH":return"₴";case"KZT":return"₸";default:return this.product.price.currency}}},methods:{...(0,f.nv)(["viewChosenCategory","actionsWithBasket"]),openCategory(){0==this.product.type&&this.viewChosenCategory(this.product)}},setup(){}};var T=l(4458),$=l(1357),M=l(3190),G=l(1821);const J=(0,L.Z)(F,[["render",I],["__scopeId","data-v-44e2ac16"]]),N=J;R()(F,"components",{QCard:T.Z,QAvatar:$.Z,QCardSection:M.Z,QBtn:S.Z,QCardActions:G.Z});const X=e=>((0,s.dD)("data-v-b03d948c"),e=e(),(0,s.Cn)(),e),ee={class:"q-pa-md text-h4 text-white max-xl center flex justify-between"},te=(0,s.Uk)(" Корзина "),le={class:"flex"},se=X((()=>(0,s._)("div",{class:"q-mr-md"},"Товары",-1))),oe={class:""},ae=X((()=>(0,s._)("div",{class:""},null,-1))),ce=X((()=>(0,s._)("div",{class:""},"Итого",-1))),ie={class:""},ne={key:0,class:"flex flex-center"},re={class:"flex-grow q-ma-sm"},de={key:1,class:"text-h5 column"},ue=(0,s.Uk)(" В корзине пока пусто "),pe={class:"full-screen"},me={class:"flex q-pl-md"},we={class:"q-px-xs text-h6"},he={key:0,class:"flex items-center text-h6"};function ve(e,t,l,o,a,c){const i=(0,s.up)("q-card-actions"),n=(0,s.up)("q-btn"),r=(0,s.up)("product-item"),d=(0,s.up)("q-card-section"),u=(0,s.up)("q-card"),p=(0,s.up)("q-dialog");return(0,s.wg)(),(0,s.j4)(p,{modelValue:e.open,"onUpdate:modelValue":t[1]||(t[1]=t=>e.open=t),persistent:"",maximized:"","transition-show":"jump-up","transition-hide":"jump-down"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{class:"bg-layout text-grey-9 relative-position"},{default:(0,s.w5)((()=>[(0,s.Wm)(i,{vertical:"",align:"right",class:""}),(0,s._)("div",ee,[te,(0,s.Wm)(n,{dense:"",flat:"",color:"white",icon:"close",onClick:e.openBasket},null,8,["onClick"])]),(0,s.Wm)(i,{align:"right",class:"max-xl center"},{default:(0,s.w5)((()=>[(0,s.Wm)(n,{flat:"",dense:"",color:"white",icon:"delete",label:"Очистить корзину",onClick:t[0]||(t[0]=t=>e.actionsWithBasket({action:"remove-all"}))})])),_:1}),(0,s.Wm)(d,{class:"max-xl center"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.viewBasket,((e,t)=>((0,s.wg)(),(0,s.j4)(r,{basket:"",class:"",key:t,product:e.product},null,8,["product"])))),128))])),_:1}),(0,s.Wm)(d,{class:"max-xl center flex flex-center"},{default:(0,s.w5)((()=>[0!=e.viewBasket.length?((0,s.wg)(),(0,s.j4)(u,{key:0,class:"full-width q-mb-xxl relative-position"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{class:"flex flex-grow justify-between"},{default:(0,s.w5)((()=>[(0,s._)("div",le,[se,(0,s._)("div",oe,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.viewBasket,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"",key:t},(0,y.zw)(e.count)+" * "+(0,y.zw)(e.product.price.amount)+" "+(0,y.zw)(c.convertСurrency(e.product.price.currency)),1)))),128))])]),ae])),_:1}),(0,s.Wm)(d,{class:"flex flex-grow justify-between text-h5 text-weight-bold"},{default:(0,s.w5)((()=>[ce,(0,s._)("div",ie,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(c.totalPrice,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"flex flex-center column",key:t},[(0,s.Uk)((0,y.zw)(e)+" ",1),c.totalPrice.length>1&&t!=c.totalPrice.length-1?((0,s.wg)(),(0,s.iD)("div",ne," + ")):(0,s.kq)("",!0)])))),128))])])),_:1}),(0,s._)("div",re,[(0,s.Wm)(n,{class:"fit",color:"teal",label:"Перейти к оформлению"})])])),_:1})):(0,s.kq)("",!0),0==e.viewBasket.length?((0,s.wg)(),(0,s.iD)("div",de,[ue,(0,s.Wm)(n,{class:"text-white q-ma-md",rounded:"",outline:"",label:"К товарам",onClick:e.openBasket},null,8,["onClick"])])):(0,s.kq)("",!0)])),_:1})])),_:1}),(0,s._)("div",pe,[0!=e.viewBasket.length?((0,s.wg)(),(0,s.j4)(u,{key:0,class:"max-xl fixed-bottom center flex justify-between items-center basket bg-white",style:{height:"60px"}},{default:(0,s.w5)((()=>[(0,s._)("div",me,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(c.totalPrice,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"flex",key:t},[(0,s._)("div",we,(0,y.zw)(e),1),c.totalPrice.length>1&&t!=c.totalPrice.length-1?((0,s.wg)(),(0,s.iD)("div",he," + ")):(0,s.kq)("",!0)])))),128))]),(0,s.Wm)(n,{class:"q-ma-sm",size:"13px",color:"teal",label:"К оформлению"})])),_:1})):(0,s.kq)("",!0)])])),_:1},8,["modelValue"])}const xe={props:{},components:{productItem:N},computed:{...(0,f.Se)(["open","allProducts","viewBasket"]),totalPrice(){let e=[],t=[],l="",s=[];return this.viewBasket.forEach((t=>{e.push(t.product.price.currency)})),e=new Set(e),e.forEach((e=>{t.push(this.viewBasket.filter((t=>t.product.price.currency==e)))})),t.forEach((e=>{l=0,e.forEach((e=>{l+=+e.count*+e.product.price.amount})),l+=" "+this.convertСurrency(e[0].product.price.currency),s.push(l)})),s}},methods:{...(0,f.OI)(["openBasket"]),...(0,f.nv)(["getUserData","viewAllProducts"]),convertСurrency(e){switch(e){case"RUB":return"₽";case"USD":return"$";case"EUR":return"€";case"UAH":return"₴";case"KZT":return"₸";default:return e}}},setup(){return{}},watch:{},mounted(){}};var ge=l(2074);const ke=(0,L.Z)(xe,[["render",ve],["__scopeId","data-v-b03d948c"]]),fe=ke;R()(xe,"components",{QDialog:ge.Z,QCard:T.Z,QCardActions:G.Z,QBtn:S.Z,QCardSection:M.Z});const ye=(0,s.aZ)({name:"IndexPage",components:{productItem:N,productBasket:fe},setup(){return{dialog:(0,k.iH)(!1),search:(0,k.iH)(""),selectView:(0,k.iH)(0)}},computed:{...(0,f.Se)(["open","allProducts","viewBasket","getInitData"])},methods:{...(0,f.OI)(["openBasket"]),...(0,f.nv)(["getUserData","viewAllProducts"]),convertURL(e){if(""==e)return!1;{let t={};for(const[l,s]of new URLSearchParams(e))t[l]=s;return t}},changeLabel(){return 0==this.selectView?"Поиск по категории":7==this.selectView?"Поиск товаров":void 0},viewItems(){return 0==this.selectView?this.allProducts.filter((e=>{var t,l,s,o,a,c;return((null===(t=e.design.title)||void 0===t?void 0:t.toLowerCase().trim().includes(this.search))||(null===(l=e.design.title)||void 0===l?void 0:l.toLowerCase().includes(this.search))||(null===(s=e.design.title)||void 0===s?void 0:s.includes(this.search))||(null===(o=e.design.rules)||void 0===o?void 0:o.includes(this.search))||(null===(a=e.design.rules)||void 0===a?void 0:a.toLowerCase().trim().includes(this.search))||(null===(c=e.design.rules)||void 0===c?void 0:c.toLowerCase().includes(this.search)))&&0==e.type})):7==this.selectView?this.allProducts.filter((e=>{var t,l,s,o,a,c;return((null===(t=e.design.title)||void 0===t?void 0:t.toLowerCase().trim().includes(this.search))||(null===(l=e.design.title)||void 0===l?void 0:l.toLowerCase().includes(this.search))||(null===(s=e.design.title)||void 0===s?void 0:s.includes(this.search))||(null===(o=e.design.rules)||void 0===o?void 0:o.includes(this.search))||(null===(a=e.design.rules)||void 0===a?void 0:a.toLowerCase().trim().includes(this.search))||(null===(c=e.design.rules)||void 0===c?void 0:c.toLowerCase().includes(this.search)))&&7==e.type})):void 0}},mounted(){this.getUserData(),this.viewAllProducts()}});var be=l(9885),_e=l(7133),qe=l(926);const Ce=(0,L.Z)(ye,[["render",g],["__scopeId","data-v-0e6a65cc"]]),Be=Ce;R()(ye,"components",{QPage:be.Z,QBtn:S.Z,QInput:K.Z,QCard:T.Z,QSkeleton:_e.ZP,QSeparator:qe.Z,QAvatar:$.Z})}}]);